<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Fixio : FIX Protocol Support for Netty" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Fixio</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kpavlov/fixio">View on GitHub</a>

          <h1 id="project_title">Fixio</h1>
          <h2 id="project_tagline">FIX Protocol Support for Netty</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/kpavlov/fixio/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/kpavlov/fixio/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="fixio---fix-protocol-support-for-netty-" class="anchor" href="#fixio---fix-protocol-support-for-netty-"><span class="octicon octicon-link"></span></a>fixio - FIX Protocol Support for Netty <a href="https://travis-ci.org/kpavlov/fixio"><img src="https://travis-ci.org/kpavlov/fixio.png?branch=master" alt="Build Status"></a>
</h1>

<h1>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h1>

<h2>
<a name="why-one-more-fix-protocol-api" class="anchor" href="#why-one-more-fix-protocol-api"><span class="octicon octicon-link"></span></a>Why One More FIX Protocol API</h2>

<p>This API is intended to replace well known <a href="http://www.quickfixj.org/" title="Java Open Source FIX Engine">QuickFIX/J</a> in high-frequency trading scenarios.</p>

<h2>
<a name="design-goals" class="anchor" href="#design-goals"><span class="octicon octicon-link"></span></a>Design goals</h2>

<ol>
<li>Implement <a href="http://www.fixprotocol.org/" title="FIX Protocol">FIX Protocol</a> Java API with as low memory footprint as possible in order to eliminate unnecessary GC overhead,
thus improving overall application performance under high load.</li>
<li>Provide <a href="http://www.fixprotocol.org/" title="FIX Protocol">FIX Protocol</a> Codecs for <a href="http://netty.io/" title="Netty">Netty</a>, to make it possible to get rid of Apache <a href="http://directory.apache.org/subprojects/mina/" title="Apache Mina">Mina</a> which is used by <a href="http://www.quickfixj.org/" title="Java Open Source FIX Engine">QuickFIX/J</a> as a transport layer.</li>
<li>Avoid using expensive operations:

<ul>
<li>Avoid synchronization.</li>
<li>Replace BigDecimals with custom <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/fixprotocol/fields/FixedPointNumber.java">Fixed Point Number</a> implementation for financial data.</li>
<li>Reuse java.util.Calendar and java.util.TimeZone instances.</li>
</ul>
</li>
</ol><p>The API has a number of <a href="#Limitations">limitations</a>, so it may be not suitable for any FIX application.</p>

<h2>
<a name="limitations" class="anchor" href="#limitations"><span class="octicon octicon-link"></span></a>Limitations</h2>

<ol>
<li>Logon message encryption is not supported. EncryptMethod(98)=0</li>
<li>XmlData is not supported</li>
<li>Message encodings other than US-ASCII are not supported.</li>
<li>...</li>
</ol><h1>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h1>

<ol>
<li>
<a href="archive/master.zip">Download ZIP archive</a> or clone/fork the repository.</li>
<li>Build and install project artifacts to your local maven repository:
<code>mvn clean install</code>
</li>
<li>Add the dependency to your project</li>
</ol><div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>kpavlov.fixio<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>core<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>You'll also need a slf4j API implementation at runtime, so please add appropriate dependency, e.g.:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>slf4j-simple<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>You may find working example of <a href="https://github.com/kpavlov/fixio/treemaster/examples/src/main/java/fixio/examples/priceclient">client</a>
and <a href="https://github.com/kpavlov/fixio/treemaster/examples/src/main/java/fixio/examples/priceserver">server</a> applications in module <a href="https://github.com/kpavlov/fixio/treemaster/examples">"examples"</a>.</p>

<p>I recommend running server with Concurrent Mark Sweep Collector enabled: <code>-XX:+UseConcMarkSweepGC</code>
and increased Survivor spaces (<code>-XX:SurvivorRatio=4</code>).</p>

<h2>
<a name="writing-simple-fix-client" class="anchor" href="#writing-simple-fix-client"><span class="octicon octicon-link"></span></a>Writing Simple FIX Client</h2>

<p>To create a simple FIX client you need to:</p>

<ol>
<li><p>Implement <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplication.java">FixApplication</a>.
You may extend <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplicationAdapter.java">FixApplicationAdapter</a> as a quick start.</p></li>
<li><p>Create an instance of <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/FixClient.java">FixClient</a> and initialize if with <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplication.java">FixApplication</a> you've just created and classpath reference to FIX session settings property file.</p></li>
<li><p>Invoke <code>FixClient.connect(host, port)</code> to initiate connection.
Method <code>connect(...)</code> returns a <a href="http://netty.io/5.0/api/io/netty/channel/ChannelFuture.html">ChannelFeature</a> which which will be notified when a channel is closed,
so you may invoke the method <code>sync()</code> on it if you wish to wait for connection to be closed.</p></li>
</ol><div class="highlight highlight-java"><pre><span class="n">FixApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixApplicationAdapter</span><span class="o">();</span>
<span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixClient</span><span class="o">(</span><span class="n">app</span><span class="o">);</span>

<span class="c1">// set settings file location related to classpath</span>
<span class="n">client</span><span class="o">.</span><span class="na">setSettingsResource</span><span class="o">(</span><span class="s">"/client.properties"</span><span class="o">);</span>

<span class="c1">// connect to specified host and port</span>
<span class="n">ChannelFeature</span> <span class="n">closeFeature</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">connect</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">10201</span><span class="o">);</span>

<span class="c1">// wait until FIX Session is closed</span>
<span class="n">closeFeature</span><span class="o">.</span><span class="na">sync</span><span class="o">();</span>

<span class="c1">// Shutdown FIX client</span>
<span class="n">client</span><span class="o">.</span><span class="na">disconnect</span><span class="o">();</span>
</pre></div>

<h2>
<a name="working-with-fix-messages" class="anchor" href="#working-with-fix-messages"><span class="octicon octicon-link"></span></a>Working With FIX Messages</h2>

<p>There are two API interfaces to represent FIX messages: <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/fixprotocol/FixMessage.java">FixMessage</a> and <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/fixprotocol/FixMessageBuilder.java">FixMessageBuilder</a>.</p>

<p><a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/fixprotocol/FixMessage.java">FixMessage</a> represents received message, whereas <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/fixprotocol/FixMessageBuilder.java">FixMessageBuilder</a> represents a message to be sent.</p>

<p>Example of using FixMessageBuilder:</p>

<div class="highlight highlight-java"><pre><span class="n">FixMessageBuilder</span> <span class="n">userRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixMessageBuilderImpl</span><span class="o">(</span><span class="n">MessageTypes</span><span class="o">.</span><span class="na">USER_REQUEST</span><span class="o">);</span>
<span class="n">userRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">UserRequestID</span><span class="o">,</span> <span class="s">"UserRequestID"</span><span class="o">);</span>
<span class="n">userRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">UserRequestType</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span><span class="c1">//UserRequestType=RequestIndividualUserStatus</span>
<span class="n">userRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Username</span><span class="o">,</span> <span class="s">"user"</span><span class="o">);</span>
</pre></div>

<p>To create a FIX message components, also referred as groups, use methods <code>FixMessageBuilder.newGrop(...)</code>.
These methods returns a new group you'll to add new fields to.</p>

<p>Example of using FixMessageBuilder with groups:</p>

<div class="highlight highlight-java"><pre><span class="n">FixMessageBuilder</span> <span class="n">quoteRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixMessageBuilderImpl</span><span class="o">(</span><span class="n">MessageTypes</span><span class="o">.</span><span class="na">QUOTE_REQUEST</span><span class="o">);</span>
<span class="n">quoteRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">QuoteReqID</span><span class="o">,</span> <span class="n">quoteRequestId</span><span class="o">);</span>
<span class="n">quoteRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">ClOrdID</span><span class="o">,</span> <span class="n">clientOrderId</span><span class="o">);</span>

<span class="n">Group</span> <span class="n">instrument1</span> <span class="o">=</span> <span class="n">quoteRequest</span><span class="o">.</span><span class="na">newGroup</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">NoRelatedSym</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">// create group with 2 fields</span>
<span class="n">instrument1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">Symbol</span><span class="o">,</span> <span class="s">"EUR/USD"</span><span class="o">);</span>
<span class="n">instrument1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">SecurityType</span><span class="o">,</span> <span class="s">"CURRENCY"</span><span class="o">);</span>

<span class="n">Group</span> <span class="n">instrument2</span> <span class="o">=</span> <span class="n">quoteRequest</span><span class="o">.</span><span class="na">newGroup</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">NoRelatedSym</span><span class="o">);</span> <span class="c1">// create group with unknown number of fields</span>
<span class="n">instrument2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">Symbol</span><span class="o">,</span> <span class="s">"EUR/CHF"</span><span class="o">);</span>
<span class="n">instrument2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">SecurityType</span><span class="o">,</span> <span class="s">"CURRENCY"</span><span class="o">);</span>

<span class="n">quoteRequest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">FieldType</span><span class="o">.</span><span class="na">QuoteRequestType</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">//QuoteRequestType=AUTOMATIC</span>
</pre></div>

<p>It is preferable to specify group size to achieve optimal performance and memory usage.</p>

<h2>
<a name="fixapplication" class="anchor" href="#fixapplication"><span class="octicon octicon-link"></span></a>FixApplication</h2>

<p><a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplication.java">FixApplication</a> interface should be implemented to handle application business logic.
It is a callback interface which handles FIX session events, incoming and outgoing messages.</p>

<p><a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplication.java">FixApplication</a> has the following methods:</p>

<ul>
<li>to handle session events (<code>onLogon(...)</code> and <code>onLogout(...)</code>),</li>
<li>to process incoming messages (<code>onMessage(...)</code>)</li>
<li>to pre-process outgoing message (<code>beforeSendMessage(...)</code>). You may add custom fields to FixMessageHeader in this method.</li>
</ul><p>Start your with extending <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplicationAdapter.java">FixApplicationAdapter</a>.</p>

<h2>
<a name="writing-simple-fix-server" class="anchor" href="#writing-simple-fix-server"><span class="octicon octicon-link"></span></a>Writing Simple FIX Server</h2>

<p>To implement FIX server one should follow these steps:</p>

<ol>
<li>Implement <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplication.java">FixApplication</a>. Use <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/handlers/FixApplicationAdapter.java">FixApplicationAdapter</a> as starting point.</li>
<li>Create <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/netty/pipeline/server/FixAuthenticator.java">FixAuthenticator</a> which is responsible for accepting or rejecting client connections.
There is a simple implementation - <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/netty/pipeline/server/AcceptAllAuthenticator.java">AcceptAllAuthenticator</a> which accepts all client connections.</li>
<li>Create and start <a href="https://github.com/kpavlov/fixio/treemaster/core/src/main/java/fixio/FixServer.java">FixServer</a>.</li>
</ol><p>FIX Server example:</p>

<div class="highlight highlight-java"><pre><span class="n">FixApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixApplicationAdapter</span><span class="o">();</span>
<span class="n">FixServer</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixServer</span><span class="o">(</span><span class="n">port</span><span class="o">,</span> <span class="k">new</span> <span class="n">AcceptAllAuthenticator</span><span class="o">(),</span> <span class="n">app</span><span class="o">);</span>
<span class="n">server</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Fixio maintained by <a href="https://github.com/kpavlov">kpavlov</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-2530248-20");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
